$def with (thought)

<div class="inline thought">
	<header>
		<h1 class="title"><a href="/$thought.name">$thought.title</a></h1>
		<div class="tags">
			$ n = len(thought.tags)
			
			$if n > 4:
				$if n % 3 == 2:
					$ n = 3
					
				$else:
					$ n = 4
		
			$for tag in thought.tags:
				<span><a href="/tag/$tag">$tag</a></span>
				
				$if loop.index0 % n == n-1:
					<br/>
		</div>
	</header>
	<article class="contents">$:thought.marked_contents</article>
</div>